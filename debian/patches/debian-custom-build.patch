From: Jakub Adam <jakub.adam@ktknet.cz>
Date: Tue, 8 Nov 2011 22:54:49 +0100
Subject: debian-custom-build

- disable maven-source-plugin (we don't need jar archive with sources)
- disable findbugs-maven-plugin (not in Debian)
- disable maven-pmd-plugin (not in Debian)
- do not build org.eclipse.jgit.http.test (requires newer Jetty than present in Debian)
- add org.eclipse.jgit.pgm to jgit console classpath
- don't build jgit console all-in-one executable
---
 org.eclipse.jgit.http.server/pom.xml |    4 ++--
 org.eclipse.jgit.pgm/jgit.sh         |    2 +-
 org.eclipse.jgit.pgm/pom.xml         |    6 +++---
 org.eclipse.jgit/pom.xml             |    8 ++++----
 pom.xml                              |   27 ++++++++++++++-------------
 5 files changed, 24 insertions(+), 23 deletions(-)

diff --git a/org.eclipse.jgit.http.server/pom.xml b/org.eclipse.jgit.http.server/pom.xml
index a7ec27d..e2a2184 100644
--- a/org.eclipse.jgit.http.server/pom.xml
+++ b/org.eclipse.jgit.http.server/pom.xml
@@ -97,7 +97,7 @@
     </resources>
 
     <plugins>
-      <plugin>
+      <!--plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-source-plugin</artifactId>
         <inherited>true</inherited>
@@ -115,7 +115,7 @@
             </configuration>
           </execution>
         </executions>
-      </plugin>
+      </plugin-->
 
       <plugin>
         <artifactId>maven-jar-plugin</artifactId>
diff --git a/org.eclipse.jgit.pgm/jgit.sh b/org.eclipse.jgit.pgm/jgit.sh
index 6b9ce40..3700d4f 100644
--- a/org.eclipse.jgit.pgm/jgit.sh
+++ b/org.eclipse.jgit.pgm/jgit.sh
@@ -86,7 +86,7 @@ Darwin)
 	;;
 esac
 
-CLASSPATH="$cp"
+CLASSPATH="$cp:/usr/share/java/org.eclipse.jgit.pgm.jar"
 export CLASSPATH
 
 java=java
diff --git a/org.eclipse.jgit.pgm/pom.xml b/org.eclipse.jgit.pgm/pom.xml
index b81cd89..479254d 100644
--- a/org.eclipse.jgit.pgm/pom.xml
+++ b/org.eclipse.jgit.pgm/pom.xml
@@ -105,7 +105,7 @@
       </dependencies>
     </profile>
   </profiles>
-
+	
   <build>
     <sourceDirectory>src/</sourceDirectory>
 
@@ -124,7 +124,7 @@
     </resources>
 
     <plugins>
-      <plugin>
+      <!--plugin>
         <artifactId>maven-jar-plugin</artifactId>
         <configuration>
           <archive>
@@ -237,7 +237,7 @@
             </configuration>
           </execution>
         </executions>
-      </plugin>
+      </plugin-->
     </plugins>
   </build>
 </project>
diff --git a/org.eclipse.jgit/pom.xml b/org.eclipse.jgit/pom.xml
index 22a7c76..32b50f0 100644
--- a/org.eclipse.jgit/pom.xml
+++ b/org.eclipse.jgit/pom.xml
@@ -115,7 +115,7 @@
         </executions>
       </plugin>
 
-      <plugin>
+      <!--plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-source-plugin</artifactId>
         <inherited>true</inherited>
@@ -133,7 +133,7 @@
             </configuration>
           </execution>
         </executions>
-      </plugin>
+      </plugin-->
 
       <plugin>
         <artifactId>maven-jar-plugin</artifactId>
@@ -152,13 +152,13 @@
 
     <pluginManagement>
       <plugins>
-        <plugin>
+        <!--plugin>
           <groupId>org.codehaus.mojo</groupId>
           <artifactId>findbugs-maven-plugin</artifactId>
           <configuration>
             <excludeFilterFile>findBugs/FindBugsExcludeFilter.xml</excludeFilterFile>
           </configuration>
-        </plugin>
+        </plugin-->
       </plugins>
     </pluginManagement>
   </build>
diff --git a/pom.xml b/pom.xml
index 0a58a6d..dd47322 100644
--- a/pom.xml
+++ b/pom.xml
@@ -215,11 +215,11 @@
           <version>2.5</version>
         </plugin>
 
-        <plugin>
+        <!--plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-shade-plugin</artifactId>
           <version>1.7.1</version>
-        </plugin>
+        </plugin-->
 
         <plugin>
           <groupId>org.apache.maven.plugins</groupId>
@@ -233,11 +233,11 @@
           <version>2.5</version>
         </plugin>
 
-        <plugin>
+        <!--plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-source-plugin</artifactId>
           <version>2.2</version>
-        </plugin>
+        </plugin-->
 
         <plugin>
           <groupId>org.apache.maven.plugins</groupId>
@@ -257,7 +257,7 @@
           <version>1.7</version>
         </plugin>
 
-        <plugin>
+        <!--plugin>
           <groupId>org.codehaus.mojo</groupId>
           <artifactId>findbugs-maven-plugin</artifactId>
           <version>2.5.2</version>
@@ -272,9 +272,9 @@
               </goals>
             </execution>
           </executions>
-        </plugin>
+        </plugin-->
 
-        <plugin>
+        <!--plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-pmd-plugin</artifactId>
           <version>2.7.1</version>
@@ -292,7 +292,7 @@
               </goals>
             </execution>
           </executions>
-        </plugin>
+        </plugin-->
 
         <plugin>
           <groupId>org.codehaus.mojo</groupId>
@@ -362,6 +362,7 @@
           <links>
             <link>http://java.sun.com/j2se/1.5.0/docs/api</link>
           </links>
+          <detectOfflineLinks>false</detectOfflineLinks>
         </configuration>
         <executions>
           <execution>
@@ -372,7 +373,7 @@
           </execution>
         </executions>
       </plugin>
-      <plugin>
+      <!--plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-source-plugin</artifactId>
         <inherited>true</inherited>
@@ -385,7 +386,7 @@
             </goals>
           </execution>
         </executions>
-      </plugin>
+      </plugin-->
     </plugins>
   </build>
 
@@ -470,11 +471,11 @@
     <module>org.eclipse.jgit.iplog</module>
     <module>org.eclipse.jgit.pgm</module>
     <module>org.eclipse.jgit.junit</module>
-    <module>org.eclipse.jgit.junit.http</module>
+    <!--module>org.eclipse.jgit.junit.http</module-->
 
-    <module>org.eclipse.jgit.test</module>
+    <!--module>org.eclipse.jgit.test</module-->
     <module>org.eclipse.jgit.ant.test</module>
-    <module>org.eclipse.jgit.http.test</module>
+    <!--module>org.eclipse.jgit.http.test</module-->
     <module>org.eclipse.jgit.pgm.test</module>
   </modules>
 
